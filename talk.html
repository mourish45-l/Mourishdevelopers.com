<script>
async function analyzeWebsite() {
    const url = document.getElementById('websiteURL').value;
    const resultContainer = document.getElementById('results');
    const loadingMessage = document.getElementById('loading');
    
    loadingMessage.style.display = 'block'; // Show loading state
    resultContainer.innerHTML = ''; // Clear previous results
    
    try {
        const response = await fetch('/api/analyze', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ url }),
        });
        
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        
        const data = await response.json();
        resultContainer.innerHTML = `<h3>Analysis Results:</h3><pre>${JSON.stringify(data, null, 2)}</pre>`;
    } catch (error) {
        resultContainer.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
    } finally {
        loadingMessage.style.display = 'none'; // Hide loading state
    }
}
</script>

<input type="text" id="websiteURL" placeholder="Enter website URL" />
<button onclick="analyzeWebsite()">Analyze</button>
<div id="loading" style="display:none;">Loading...</div>
<div id="results"></div>
